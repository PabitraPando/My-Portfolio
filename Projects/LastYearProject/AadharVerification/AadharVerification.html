<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Aadhaar Verification</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white text-center">
          <h4>Aadhaar Card Verification</h4>
        </div>
        <div class="card-body">
          <form id="aadhaarForm">
            <div class="mb-3">
              <label for="aadhaarNumber" class="form-label">Enter Aadhaar Number</label>
              <input type="text" class="form-control" id="aadhaarNumber" placeholder="XXXX-XXXX-XXXX" maxlength="14" required>
            </div>
            <div class="mb-3">
              <label for="dob" class="form-label">Date of Birth</label>
              <input type="date" class="form-control" id="dob" required>
            </div>
            <div class="mb-3">
              <label for="captcha" class="form-label">Enter Captcha</label>
              <input type="text" class="form-control" id="captcha" placeholder="Type the characters shown" required>
              <small class="text-muted">* Captcha image would be shown here in real implementation</small>
            </div>
            <button type="submit" class="btn btn-success w-100 fw-bold text-white">Verify Aadhaar</button>
          </form>
        </div>
        <div class="card-footer text-center text-muted">
          For demo purposes only. Not connected to UIDAI.
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById("aadhaarForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const aadhaarInput = document.getElementById("aadhaarNumber");
    const dobInput = document.getElementById("dob");
    const captchaInput = document.getElementById("captcha");

    const aadhaar = aadhaarInput.value.replace(/\D/g, "");
    const dob = new Date(dobInput.value);
    const today = new Date();
    const age = today.getFullYear() - dob.getFullYear();
    const monthDiff = today.getMonth() - dob.getMonth();
    const dayDiff = today.getDate() - dob.getDate();

    let valid = true;

    // Aadhaar validation
    const startsValid = /^[6-9]/.test(aadhaar);
    const lengthValid = aadhaar.length === 12;
    const repeatValid = !/(.)\1{4,}/.test(aadhaar);

    if (!startsValid || !lengthValid || !repeatValid) {
      aadhaarInput.style.borderColor = "red";
      alert("❌ Aadhaar must be 12 digits, start with 6–9, and not repeat any digit more than 4 times.");
      valid = false;
    } else {
      aadhaarInput.style.borderColor = "#ccc";
    }

    // Age validation
    const is18OrOlder = age > 18 || (age === 18 && (monthDiff > 0 || (monthDiff === 0 && dayDiff >= 0)));
    if (!is18OrOlder) {
      dobInput.style.borderColor = "red";
      alert("❌ You must be at least 18 years old.");
      valid = false;
    } else {
      dobInput.style.borderColor = "#ccc";
    }

    // Captcha validation
    if (captchaInput.value.trim() === "") {
      captchaInput.style.borderColor = "red";
      alert("❌ Please enter the captcha.");
      valid = false;
    } else {
      captchaInput.style.borderColor = "#ccc";
    }

    // Final check and save DOB
    if (valid) {
      localStorage.setItem("userDOB", dobInput.value); // ✅ Save DOB only if all fields are valid
      window.location.href = "/My-Portfolio/Projects/LastYearProject/DLVerification/DLVerification.html";
    }
  });
</script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>