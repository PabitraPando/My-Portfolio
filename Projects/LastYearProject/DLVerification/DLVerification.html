<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Driving Licence Verification</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-dark text-white text-center">
          <h4>Driving Licence Verification</h4>
        </div>
        <div class="card-body">
          <form id="dlForm">
            <div class="mb-3">
              <label for="dlNumber" class="form-label">Enter Licence Number</label>
              <input type="text" class="form-control" id="dlNumber" placeholder="DL-0420110149646" required>
            </div>
            <div class="mb-3">
              <label for="dob" class="form-label">Date of Birth</label>
              <input type="date" class="form-control" id="dob" required>
            </div>
            <div class="mb-3">
              <label for="state" class="form-label">Issuing State</label>
              <select class="form-select" id="state" required>
                <option value="">Select State</option>
                <option value="AS">Assam</option>
                <option value="MH">Maharashtra</option>
                <option value="DL">Delhi</option>
                <option value="TN">Tamil Nadu</option>
                <!-- Add more states as needed -->
              </select>
            </div>
            <button type="submit" class="btn btn-primary w-100 fw-bold text-white">Verify Licence</button>
          </form>
        </div>
        <div class="card-footer text-center text-muted">
          Demo UI only. Not linked to Parivahan or official databases.
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const dobField = document.getElementById("dob");
    const savedDOB = localStorage.getItem("userDOB");
    if (savedDOB && dobField) {
      dobField.value = savedDOB;
    }
  });

  document.getElementById("dlForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const dlInput = document.getElementById("dlNumber");
    const dobInput = document.getElementById("dob");
    const stateSelect = document.getElementById("state");

    const dlValue = dlInput.value.trim();
    const dobValue = dobInput.value.trim();
    const stateValue = stateSelect.value;

    let valid = true;

    // Validate DL format: Indian format like DL-0420110149646
    const dlPattern = /^[A-Z]{2}-[0-9]{2}[0-9]{4}[0-9]{7}$/;
    if (!dlPattern.test(dlValue)) {
      dlInput.style.borderColor = "red";
      alert("❌ Invalid Driving Licence format. Use format like DL-0420110149646.");
      valid = false;
    } else {
      dlInput.style.borderColor = "#ccc";
    }

    // Validate DOB match with stored value
    const storedDOB = localStorage.getItem("userDOB");
    if (dobValue !== storedDOB) {
      dobInput.style.borderColor = "red";
      alert("❌ Date of Birth does not match the one used during Aadhaar verification.");
      valid = false;
    } else {
      dobInput.style.borderColor = "#ccc";
    }

    // Validate state selection
    if (stateValue === "") {
      stateSelect.style.borderColor = "red";
      alert("❌ Please select the issuing state.");
      valid = false;
    } else {
      stateSelect.style.borderColor = "#ccc";
    }

    // Redirect if all valid
    if (valid) {
      window.location.href = "/My-Portfolio/Projects/LastYearProject/Home/univ.html";
    }
  });
</script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>